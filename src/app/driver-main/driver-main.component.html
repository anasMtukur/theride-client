
<div class="row py-5 px-4">
	<div class="col-xl-4 col-md-6 col-sm-10 mx-auto">

		<!-- Profile widget -->
		<div class="bg-white shadow rounded overflow-hidden">
			<div class="px-4 pt-0 pb-4 bg-dark">
				<div class="media align-items-end profile-header">
					<div class="profile mr-3"><img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="..." width="130" class="rounded mb-2 img-thumbnail"><a href="#" class="btn btn-dark btn-sm btn-block">Edit profile</a></div>
					<div class="media-body mb-5 text-white">
						<h4 class="mt-0 mb-0">{{ currentUser?.fullname }}</h4>
						<p class="small mb-0"> <i class="fa fa-map-marker mr-2"></i>{{ currentUser.username }}</p>
						<p class="small mb-4"> 
							<i class="fa fa-user mr-2"></i>
							<span><strong>Roles: </strong></span>
							<span class="label label-warning" *ngFor="let role of currentUser.roles">
								{{ role }}
							</span></p>
					</div>
				</div>
			</div>

			<div class="bg-light p-4 d-flex justify-content-end text-center">
				<ul class="list-inline mb-0">
					<li class="list-inline-item text-center">
						<h5 class="font-weight-bold mb-0 d-block">5 Star</h5>
						<small class="text-muted"> 
							<i class="fa fa-star mr-1"></i>20 Ratings
						</small>
					</li>
					
				</ul>
			</div>

			<div class="col-sm-12 mt-0">
				<div class="row">
					<div class="col-12 mb-3 bg-white shadow pt-3 pb-2">
						<h5>Incoming Trips</h5>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 mb-2">
						<div class="row" *ngIf="bookings?.length; else noIncoming">
							<div class="card w-100 mb-2" *ngFor="let item of bookings">
								<div class="row p-2">
								  
								  <div class="col-sm-8">
									<div class="card-block">
									  <h4 class="card-title mb-0">{{ item.passenger?.firstName }} {{ item.passenger?.lastName }}</h4>
									  <p class="mb-0">{{item.readable}}</p>
									  <small class="text-muted">Booking Type: {{item.bookingType}}</small>			
									</div>
								  </div>

								  <div class="col-sm-4 float-right d-flex flex-column justify-content-around" *ngIf="item.bookingStatus === 'ASSIGNING_DRIVER'">
									<button (click)="acceptBooking( item.id, 'ACCEPTED' )" class="btn btn-outline-primary btn-sm btn-block" style="height: 100%;">Accept</button>
									<!-- <button class="btn btn-outline-danger btn-sm btn-block">Reject</button> -->
								  </div>

								  <div class="col-sm-4 float-right d-flex flex-column justify-content-around" *ngIf="item.bookingStatus === 'ACCEPTED'">
									<button (click)="goToBooking( item.id )" class="btn btn-outline-primary btn-sm btn-block" style="height: 100%;">Start Trip </button>
								  </div>
						   
								</div>
							</div>
						</div>
						<ng-template #noIncoming>
							<p class="text-center mt-5"> You have no incoming trip requests. </p>
						</ng-template>
					</div>
				</div>

			</div>

			<div class="col-sm-12 mt-0">
				<div class="row">
					<div class="col-12 mb-3 bg-white shadow pt-3 pb-2">
						<h5>Recent History</h5>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 mb-2 px-4" style="max-height: 35vh; overflow-y: auto; overflow-x: hidden;">
						<div class="row" *ngIf="recentBookings?.length; else noRecent">
							<div class="card w-100 mb-2" *ngFor="let item of recentBookings">
								<div class="row p-2">
								  
								  <div class="col-sm-8">
									<div class="card-block">
									  <h4 class="card-title mb-0">{{ item.passenger?.firstName }} {{ item.passenger?.lastName }}</h4>
									  <p class="mb-0">{{item.readable}}</p>
									  <small class="text-muted">{{item.bookingStatus}}</small>			
									</div>
								  </div>

								  <div class="col-sm-4 float-right d-flex flex-column justify-content-around">
									<button (click)="goToBooking( item.id )" class="btn btn-outline-primary btn-sm btn-block" style="height: 100%;">View Trip </button>
								  </div>
						   
								</div>
							</div>
						</div>
						<ng-template #noRecent>
							<p class="text-center mt-5"> You have no incoming trip requests. </p>
						</ng-template>
					</div>
				</div>

			</div>
		</div><!-- End profile widget -->

	</div>
</div>
